
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="jhonfvg">
      
      
        <link rel="canonical" href="https://jfinfocesde.github.io/25b2/api/03-entidades-modelos/">
      
      
        <link rel="prev" href="../02-configuracion-database/">
      
      
        <link rel="next" href="../04-dtos-mapeo/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>3. Entidades y Modelos de Datos - Backend 2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-entidades-y-modelos-de-datos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Backend 2" class="md-header__button md-logo" aria-label="Backend 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215m-6.56 0a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Backend 2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Entidades y Modelos de Datos
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B√∫squeda" placeholder="B√∫squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b√∫squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Pesta√±as" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Inicio

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../content/p1/" class="md-tabs__link">
          
  
    
  
  Contenido

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../activities/p1/" class="md-tabs__link">
          
  
    
  
  Actividades

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../tutorials/p1/" class="md-tabs__link">
          
  
    
  
  Tutoriales

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../pi/p1/" class="md-tabs__link">
          
  
    
  
  Proyecto Integrador

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Backend 2" class="md-nav__button md-logo" aria-label="Backend 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215m-6.56 0a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/></svg>

    </a>
    Backend 2
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contenido
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Contenido
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 1 - Pacto pedag√≥gico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 2 - Gu√≠a sobre API REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 3 - Patrones de Dise√±o: MVC y su aplicaci√≥n en una API REST con Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 4 - Spring Boot Generalidades
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 5: Entidades en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 6 - Evaluaci√≥n Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Relaciones en Spring Boot con JPA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 8 - Repositorios en Spring Boot (Spring Data JPA)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 9 - Servicios en Spring Boot (Conceptos B√°sicos)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 10 - Servicios Avanzados en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 11 - Controladores Spring Boot API REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 12 - Evaluaci√≥n Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentaci√≥n de API con Spring Boot y OpenAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 14 - Conceptos y t√©rminos t√©cnicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../content/p16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 16 - Evaluaci√≥n Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Actividades
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Actividades
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 3 - Actividad colaborativa: Dise√±ando una API REST con MVC sin escribir c√≥digo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 4 - Gu√≠a Completa para Crear un Proyecto Spring Boot con H2, PostgreSQL y MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutoriales
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutoriales
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estructuraci√≥n de un Proyecto API REST en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring Boot Actuator: Monitoreo y Gesti√≥n de Aplicaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial Completo de Lombok en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ejemplo Api Rest
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Ejemplo Api Rest
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-estructura-proyecto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estructura del Proyecto Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-configuracion-inicial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Configuraci√≥n Inicial del Proyecto Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-configuracion-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Configuraci√≥n de Base de Datos y JPA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3. Entidades y Modelos de Datos
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3. Entidades y Modelos de Datos
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerrequisitos" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Prerrequisitos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diseno-del-modelo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      üèóÔ∏è Dise√±o del Modelo de Datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è Dise√±o del Modelo de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagrama-de-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      Diagrama de Entidades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Relaciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-user-usuario" class="md-nav__link">
    <span class="md-ellipsis">
      üë§ Entidad User (Usuario)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üë§ Entidad User (Usuario)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-user" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad User
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad User">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anotaciones-de-clase" class="md-nav__link">
    <span class="md-ellipsis">
      Anotaciones de Clase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anotaciones-de-campo" class="md-nav__link">
    <span class="md-ellipsis">
      Anotaciones de Campo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-item-articulo" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ Entidad Item (Art√≠culo)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üì¶ Entidad Item (Art√≠culo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-item" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad Item
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad Item">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-negocio" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Negocio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loan" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con Loan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-loan-prestamo" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Entidad Loan (Pr√©stamo)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã Entidad Loan (Pr√©stamo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-loan" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad Loan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad Loan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relaciones-many-to-one" class="md-nav__link">
    <span class="md-ellipsis">
      Relaciones Many-to-One
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#campos-de-negocio_1" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Negocio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loanhistory" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con LoanHistory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-loanhistory-historial-de-prestamos" class="md-nav__link">
    <span class="md-ellipsis">
      üìä Entidad LoanHistory (Historial de Pr√©stamos)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìä Entidad LoanHistory (Historial de Pr√©stamos)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-loanhistory" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad LoanHistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad LoanHistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-auditoria" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Auditor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loan_1" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con Loan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manejo-de-referencias-circulares" class="md-nav__link">
    <span class="md-ellipsis">
      üîÑ Manejo de Referencias Circulares
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîÑ Manejo de Referencias Circulares">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problema-de-referencias-circulares" class="md-nav__link">
    <span class="md-ellipsis">
      Problema de Referencias Circulares
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solucion-con-jackson" class="md-nav__link">
    <span class="md-ellipsis">
      Soluci√≥n con Jackson
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructura-de-directorios" class="md-nav__link">
    <span class="md-ellipsis">
      üìÅ Estructura de Directorios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verificacion-de-las-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ Verificaci√≥n de las Entidades
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚úÖ Verificaci√≥n de las Entidades">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-compilar-el-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      1. Compilar el Proyecto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ejecutar-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Ejecutar la Aplicaci√≥n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-creacion-de-tablas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar Creaci√≥n de Tablas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mejores-practicas" class="md-nav__link">
    <span class="md-ellipsis">
      üé® Mejores Pr√°cticas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üé® Mejores Pr√°cticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nomenclatura-de-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      1. Nomenclatura de Entidades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-uso-de-lombok" class="md-nav__link">
    <span class="md-ellipsis">
      2. Uso de Lombok
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-relaciones-bidireccionales" class="md-nav__link">
    <span class="md-ellipsis">
      3. Relaciones Bidireccionales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-tipos-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      4. Tipos de Datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problemas-comunes-y-soluciones" class="md-nav__link">
    <span class="md-ellipsis">
      üö® Problemas Comunes y Soluciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö® Problemas Comunes y Soluciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-table-user-doesnt-exist" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "Table 'user' doesn't exist"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-stackoverflowerror-en-json" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "StackOverflowError" en JSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-lazyinitializationexception" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "LazyInitializationException"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-detached-entity-passed-to-persist" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "Detached entity passed to persist"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuraciones-adicionales" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Configuraciones Adicionales
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîß Configuraciones Adicionales">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditoria-automatica" class="md-nav__link">
    <span class="md-ellipsis">
      Auditor√≠a Autom√°tica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Validaciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-clave-aprendidos" class="md-nav__link">
    <span class="md-ellipsis">
      üìö Conceptos Clave Aprendidos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proximos-pasos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Pr√≥ximos Pasos
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-dtos-mapeo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. DTOs y Mapeo de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-repositorios-acceso-datos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Repositorios y Acceso a Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-servicios-logica-negocio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Servicios y L√≥gica de Negocio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-controladores-rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Controladores REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-actuator-monitoreo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Spring Boot Actuator y Monitoreo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-validacion-manejo-errores/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Validaci√≥n y Manejo de Errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-Repositorio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Repositorio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proyecto Integrador
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Proyecto Integrador
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fork del Repositorio para el Proyecto Integrador - B√°sico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repositorio para el Proyecto Integrador - Seguridad y Documentaci√≥n API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerrequisitos" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Prerrequisitos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diseno-del-modelo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      üèóÔ∏è Dise√±o del Modelo de Datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è Dise√±o del Modelo de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagrama-de-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      Diagrama de Entidades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Relaciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-user-usuario" class="md-nav__link">
    <span class="md-ellipsis">
      üë§ Entidad User (Usuario)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üë§ Entidad User (Usuario)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-user" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad User
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad User">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anotaciones-de-clase" class="md-nav__link">
    <span class="md-ellipsis">
      Anotaciones de Clase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anotaciones-de-campo" class="md-nav__link">
    <span class="md-ellipsis">
      Anotaciones de Campo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-item-articulo" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ Entidad Item (Art√≠culo)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üì¶ Entidad Item (Art√≠culo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-item" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad Item
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad Item">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-negocio" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Negocio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loan" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con Loan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-loan-prestamo" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Entidad Loan (Pr√©stamo)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã Entidad Loan (Pr√©stamo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-loan" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad Loan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad Loan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relaciones-many-to-one" class="md-nav__link">
    <span class="md-ellipsis">
      Relaciones Many-to-One
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#campos-de-negocio_1" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Negocio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loanhistory" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con LoanHistory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entidad-loanhistory-historial-de-prestamos" class="md-nav__link">
    <span class="md-ellipsis">
      üìä Entidad LoanHistory (Historial de Pr√©stamos)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìä Entidad LoanHistory (Historial de Pr√©stamos)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicacion-de-la-entidad-loanhistory" class="md-nav__link">
    <span class="md-ellipsis">
      üîç Explicaci√≥n de la Entidad LoanHistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Explicaci√≥n de la Entidad LoanHistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-auditoria" class="md-nav__link">
    <span class="md-ellipsis">
      Campos de Auditor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-loan_1" class="md-nav__link">
    <span class="md-ellipsis">
      Relaci√≥n con Loan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manejo-de-referencias-circulares" class="md-nav__link">
    <span class="md-ellipsis">
      üîÑ Manejo de Referencias Circulares
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîÑ Manejo de Referencias Circulares">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problema-de-referencias-circulares" class="md-nav__link">
    <span class="md-ellipsis">
      Problema de Referencias Circulares
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solucion-con-jackson" class="md-nav__link">
    <span class="md-ellipsis">
      Soluci√≥n con Jackson
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructura-de-directorios" class="md-nav__link">
    <span class="md-ellipsis">
      üìÅ Estructura de Directorios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verificacion-de-las-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ Verificaci√≥n de las Entidades
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚úÖ Verificaci√≥n de las Entidades">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-compilar-el-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      1. Compilar el Proyecto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ejecutar-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Ejecutar la Aplicaci√≥n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-creacion-de-tablas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar Creaci√≥n de Tablas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mejores-practicas" class="md-nav__link">
    <span class="md-ellipsis">
      üé® Mejores Pr√°cticas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üé® Mejores Pr√°cticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nomenclatura-de-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      1. Nomenclatura de Entidades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-uso-de-lombok" class="md-nav__link">
    <span class="md-ellipsis">
      2. Uso de Lombok
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-relaciones-bidireccionales" class="md-nav__link">
    <span class="md-ellipsis">
      3. Relaciones Bidireccionales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-tipos-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      4. Tipos de Datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problemas-comunes-y-soluciones" class="md-nav__link">
    <span class="md-ellipsis">
      üö® Problemas Comunes y Soluciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö® Problemas Comunes y Soluciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-table-user-doesnt-exist" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "Table 'user' doesn't exist"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-stackoverflowerror-en-json" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "StackOverflowError" en JSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-lazyinitializationexception" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "LazyInitializationException"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-detached-entity-passed-to-persist" class="md-nav__link">
    <span class="md-ellipsis">
      Error: "Detached entity passed to persist"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuraciones-adicionales" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Configuraciones Adicionales
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîß Configuraciones Adicionales">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditoria-automatica" class="md-nav__link">
    <span class="md-ellipsis">
      Auditor√≠a Autom√°tica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Validaciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-clave-aprendidos" class="md-nav__link">
    <span class="md-ellipsis">
      üìö Conceptos Clave Aprendidos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proximos-pasos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Pr√≥ximos Pasos
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="3-entidades-y-modelos-de-datos">3. Entidades y Modelos de Datos</h1>
<h2 id="objetivos">üéØ Objetivos</h2>
<p>En esta secci√≥n aprender√°s a:
- Dise√±ar el modelo de datos del sistema de inventario
- Crear entidades JPA con anotaciones
- Definir relaciones entre entidades
- Usar Lombok para reducir c√≥digo boilerplate
- Manejar referencias circulares con Jackson
- Implementar buenas pr√°cticas en el dise√±o de entidades</p>
<h2 id="prerrequisitos">üìã Prerrequisitos</h2>
<ul>
<li>Proyecto Spring Boot configurado</li>
<li>Base de datos PostgreSQL configurada</li>
<li>Conocimientos b√°sicos de JPA/Hibernate</li>
<li>Comprensi√≥n de relaciones de base de datos</li>
</ul>
<h2 id="diseno-del-modelo-de-datos">üèóÔ∏è Dise√±o del Modelo de Datos</h2>
<h3 id="diagrama-de-entidades">Diagrama de Entidades</h3>
<p>Nuestro sistema de inventario tendr√° las siguientes entidades:</p>
<div class="highlight"><pre><span></span><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    User     ‚îÇ       ‚îÇ    Item     ‚îÇ       ‚îÇ    Loan     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ       ‚îÇ id (PK)     ‚îÇ       ‚îÇ id (PK)     ‚îÇ
‚îÇ username    ‚îÇ       ‚îÇ name        ‚îÇ       ‚îÇ item_id(FK) ‚îÇ
‚îÇ email       ‚îÇ       ‚îÇ description ‚îÇ       ‚îÇ user_id(FK) ‚îÇ
‚îÇ password    ‚îÇ       ‚îÇ quantity    ‚îÇ       ‚îÇ loanDate    ‚îÇ
‚îÇ role        ‚îÇ       ‚îÇ             ‚îÇ       ‚îÇ returnDate  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ returned    ‚îÇ
       ‚îÇ                       ‚îÇ             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                       ‚îÇ                     ‚îÇ
       ‚îÇ                       ‚îÇ                     ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                               ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ LoanHistory ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                    ‚îÇ id (PK)     ‚îÇ
                    ‚îÇ loan_id(FK) ‚îÇ
                    ‚îÇ actionDate  ‚îÇ
                    ‚îÇ action      ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre></div>
<h3 id="relaciones">Relaciones</h3>
<ul>
<li><strong>User ‚Üî Loan</strong>: Un usuario puede tener m√∫ltiples pr√©stamos (1:N)</li>
<li><strong>Item ‚Üî Loan</strong>: Un item puede estar en m√∫ltiples pr√©stamos (1:N)</li>
<li><strong>Loan ‚Üî LoanHistory</strong>: Un pr√©stamo puede tener m√∫ltiples registros de historial (1:N)</li>
</ul>
<h2 id="entidad-user-usuario">üë§ Entidad User (Usuario)</h2>
<p>Crea el archivo <code>src/main/java/com/example/pib2/models/entities/User.java</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.pib2.models.entities</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.annotation.JsonManagedReference</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;users&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">role</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonManagedReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="explicacion-de-la-entidad-user">üîç Explicaci√≥n de la Entidad User</h3>
<h4 id="anotaciones-de-clase">Anotaciones de Clase</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
</code></pre></div>
- <strong>Prop√≥sito</strong>: Marca la clase como una entidad JPA
- <strong>Resultado</strong>: Hibernate crear√° una tabla en la base de datos</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Data</span>
</code></pre></div>
- <strong>Prop√≥sito</strong>: Anotaci√≥n de Lombok que genera autom√°ticamente:
  - Getters y setters para todos los campos
  - M√©todo <code>toString()</code>
  - M√©todos <code>equals()</code> y <code>hashCode()</code>
  - Constructor sin argumentos</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;users&quot;</span><span class="p">)</span>
</code></pre></div>
- <strong>Prop√≥sito</strong>: Especifica el nombre de la tabla en la base de datos
- <strong>Raz√≥n</strong>: "user" es una palabra reservada en PostgreSQL</p>
<h4 id="anotaciones-de-campo">Anotaciones de Campo</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Id</span>
<span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</code></pre></div>
- <strong>@Id</strong>: Marca el campo como clave primaria
- <strong>@GeneratedValue</strong>: Especifica c√≥mo se genera el valor
- <strong>IDENTITY</strong>: Usa auto-incremento de la base de datos</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="nd">@JsonManagedReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>
</code></pre></div>
- <strong>@OneToMany</strong>: Relaci√≥n uno a muchos
- <strong>mappedBy</strong>: Indica que la relaci√≥n es mapeada por el campo "user" en la entidad Loan
- <strong>cascade = CascadeType.ALL</strong>: Las operaciones se propagan a las entidades relacionadas
- <strong>orphanRemoval = true</strong>: Elimina autom√°ticamente los pr√©stamos hu√©rfanos
- <strong>@JsonManagedReference</strong>: Evita referencias circulares en JSON</p>
<h2 id="entidad-item-articulo">üì¶ Entidad Item (Art√≠culo)</h2>
<p>Crea el archivo <code>src/main/java/com/example/pib2/models/entities/Item.java</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.pib2.models.entities</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.annotation.JsonManagedReference</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Item</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;item&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonManagedReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="explicacion-de-la-entidad-item">üîç Explicaci√≥n de la Entidad Item</h3>
<h4 id="campos-de-negocio">Campos de Negocio</h4>
<p><div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
</code></pre></div>
- <strong>name</strong>: Nombre del art√≠culo
- <strong>description</strong>: Descripci√≥n detallada
- <strong>quantity</strong>: Cantidad disponible en inventario</p>
<h4 id="relacion-con-loan">Relaci√≥n con Loan</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;item&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="nd">@JsonManagedReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>
</code></pre></div>
- Un item puede estar en m√∫ltiples pr√©stamos
- Si se elimina un item, se eliminan todos sus pr√©stamos
- Evita referencias circulares en la serializaci√≥n JSON</p>
<h2 id="entidad-loan-prestamo">üìã Entidad Loan (Pr√©stamo)</h2>
<p>Crea el archivo <code>src/main/java/com/example/pib2/models/entities/Loan.java</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.pib2.models.entities</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.annotation.JsonBackReference</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.annotation.JsonManagedReference</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Loan</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@ManyToOne</span>
<span class="w">    </span><span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;item_id&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonBackReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@ManyToOne</span>
<span class="w">    </span><span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user_id&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonBackReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">loanDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">returnDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">returned</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;loan&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonManagedReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">LoanHistory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">histories</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="explicacion-de-la-entidad-loan">üîç Explicaci√≥n de la Entidad Loan</h3>
<h4 id="relaciones-many-to-one">Relaciones Many-to-One</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@ManyToOne</span>
<span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;item_id&quot;</span><span class="p">)</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</code></pre></div>
- <strong>@ManyToOne</strong>: Muchos pr√©stamos pueden referenciar un item
- <strong>@JoinColumn</strong>: Especifica el nombre de la columna de clave for√°nea
- <strong>@JsonBackReference</strong>: Lado "back" de la referencia bidireccional</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@ManyToOne</span>
<span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user_id&quot;</span><span class="p">)</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
</code></pre></div>
- Similar configuraci√≥n para la relaci√≥n con User</p>
<h4 id="campos-de-negocio_1">Campos de Negocio</h4>
<p><div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">loanDate</span><span class="p">;</span>
<span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">returnDate</span><span class="p">;</span>
<span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">returned</span><span class="p">;</span>
</code></pre></div>
- <strong>LocalDate</strong>: Tipo de Java 8+ para fechas (sin hora)
- <strong>loanDate</strong>: Fecha en que se realiz√≥ el pr√©stamo
- <strong>returnDate</strong>: Fecha programada de devoluci√≥n
- <strong>returned</strong>: Estado booleano del pr√©stamo</p>
<h4 id="relacion-con-loanhistory">Relaci√≥n con LoanHistory</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;loan&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="nd">@JsonManagedReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">LoanHistory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">histories</span><span class="p">;</span>
</code></pre></div>
- Un pr√©stamo puede tener m√∫ltiples registros de historial
- Cascada completa y eliminaci√≥n de hu√©rfanos</p>
<h2 id="entidad-loanhistory-historial-de-prestamos">üìä Entidad LoanHistory (Historial de Pr√©stamos)</h2>
<p>Crea el archivo <code>src/main/java/com/example/pib2/models/entities/LoanHistory.java</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.pib2.models.entities</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.annotation.JsonBackReference</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LoanHistory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@ManyToOne</span>
<span class="w">    </span><span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;loan_id&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@JsonBackReference</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Loan</span><span class="w"> </span><span class="n">loan</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">actionDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w"> </span><span class="c1">// e.g., &quot;CREATED&quot;, &quot;RETURNED&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="explicacion-de-la-entidad-loanhistory">üîç Explicaci√≥n de la Entidad LoanHistory</h3>
<h4 id="campos-de-auditoria">Campos de Auditor√≠a</h4>
<p><div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">actionDate</span><span class="p">;</span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">action</span><span class="p">;</span>
</code></pre></div>
- <strong>LocalDateTime</strong>: Incluye fecha y hora exacta
- <strong>action</strong>: Tipo de acci√≥n realizada (ej: "CREATED", "RETURNED", "EXTENDED")</p>
<h4 id="relacion-con-loan_1">Relaci√≥n con Loan</h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@ManyToOne</span>
<span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;loan_id&quot;</span><span class="p">)</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Loan</span><span class="w"> </span><span class="n">loan</span><span class="p">;</span>
</code></pre></div>
- M√∫ltiples registros de historial por pr√©stamo
- Referencia hacia atr√°s para evitar ciclos JSON</p>
<h2 id="manejo-de-referencias-circulares">üîÑ Manejo de Referencias Circulares</h2>
<h3 id="problema-de-referencias-circulares">Problema de Referencias Circulares</h3>
<p>Sin las anotaciones de Jackson, tendr√≠amos:
<div class="highlight"><pre><span></span><code>User ‚Üí Loan ‚Üí User ‚Üí Loan ‚Üí ... (infinito)
</code></pre></div></p>
<h3 id="solucion-con-jackson">Soluci√≥n con Jackson</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// En el lado &quot;padre&quot; (User, Item)</span>
<span class="nd">@JsonManagedReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>

<span class="c1">// En el lado &quot;hijo&quot; (Loan)</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</code></pre></div>
<p><strong>Resultado en JSON:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;john_doe&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;john@example.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;loans&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;loanDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;returned&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="c1">// user e item no aparecen aqu√≠</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="estructura-de-directorios">üìÅ Estructura de Directorios</h2>
<p>Organiza tus entidades de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>src/main/java/com/example/pib2/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ entities/
‚îÇ       ‚îú‚îÄ‚îÄ User.java
‚îÇ       ‚îú‚îÄ‚îÄ Item.java
‚îÇ       ‚îú‚îÄ‚îÄ Loan.java
‚îÇ       ‚îî‚îÄ‚îÄ LoanHistory.java
‚îú‚îÄ‚îÄ controllers/
‚îú‚îÄ‚îÄ services/
‚îú‚îÄ‚îÄ repositories/
‚îî‚îÄ‚îÄ Pib2Application.java
</code></pre></div>
<h2 id="verificacion-de-las-entidades">‚úÖ Verificaci√≥n de las Entidades</h2>
<h3 id="1-compilar-el-proyecto">1. Compilar el Proyecto</h3>
<div class="highlight"><pre><span></span><code>./mvnw<span class="w"> </span>clean<span class="w"> </span>compile
</code></pre></div>
<h3 id="2-ejecutar-la-aplicacion">2. Ejecutar la Aplicaci√≥n</h3>
<div class="highlight"><pre><span></span><code>./mvnw<span class="w"> </span>spring-boot:run
</code></pre></div>
<h3 id="3-verificar-creacion-de-tablas">3. Verificar Creaci√≥n de Tablas</h3>
<p>En los logs deber√≠as ver:</p>
<div class="highlight"><pre><span></span><code><span class="n">Hibernate</span><span class="p">:</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">bigserial</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">password</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="k">role</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">Hibernate</span><span class="p">:</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">bigserial</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">quantity</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">Hibernate</span><span class="p">:</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">loan</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">bigserial</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="n">loan_date</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span>
<span class="w">    </span><span class="n">return_date</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span>
<span class="w">    </span><span class="n">returned</span><span class="w"> </span><span class="nb">boolean</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="n">item_id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span>
<span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">Hibernate</span><span class="p">:</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">loan_history</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">bigserial</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="n">action</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">action_date</span><span class="w"> </span><span class="k">timestamp</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
<span class="w">    </span><span class="n">loan_id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="mejores-practicas">üé® Mejores Pr√°cticas</h2>
<h3 id="1-nomenclatura-de-entidades">1. Nomenclatura de Entidades</h3>
<p>‚úÖ <strong>Bueno:</strong>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;users&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Plural, snake_case</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="c1">// Singular, PascalCase</span>
</code></pre></div></p>
<p>‚ùå <strong>Malo:</strong>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">user</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="c1">// Min√∫scula</span>
</code></pre></div></p>
<h3 id="2-uso-de-lombok">2. Uso de Lombok</h3>
<p>‚úÖ <strong>Bueno:</strong>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// campos</span>
<span class="p">}</span>
</code></pre></div></p>
<p>‚ùå <strong>Malo:</strong>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Escribir manualmente todos los getters/setters</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="3-relaciones-bidireccionales">3. Relaciones Bidireccionales</h3>
<p>‚úÖ <strong>Bueno:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// Lado padre</span>
<span class="nd">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">orphanRemoval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="nd">@JsonManagedReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Loan</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loans</span><span class="p">;</span>

<span class="c1">// Lado hijo</span>
<span class="nd">@ManyToOne</span>
<span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user_id&quot;</span><span class="p">)</span>
<span class="nd">@JsonBackReference</span>
<span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
</code></pre></div></p>
<h3 id="4-tipos-de-datos">4. Tipos de Datos</h3>
<p>‚úÖ <strong>Bueno:</strong>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">loanDate</span><span class="p">;</span><span class="w">      </span><span class="c1">// Para fechas</span>
<span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">actionDate</span><span class="p">;</span><span class="w"> </span><span class="c1">// Para fecha y hora</span>
<span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">;</span><span class="w">        </span><span class="c1">// Para dinero</span>
</code></pre></div></p>
<p>‚ùå <strong>Malo:</strong>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">loanDate</span><span class="p">;</span><span class="w">           </span><span class="c1">// Deprecated</span>
<span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">price</span><span class="p">;</span><span class="w">             </span><span class="c1">// Impreciso para dinero</span>
</code></pre></div></p>
<h2 id="problemas-comunes-y-soluciones">üö® Problemas Comunes y Soluciones</h2>
<h3 id="error-table-user-doesnt-exist">Error: "Table 'user' doesn't exist"</h3>
<p><strong>Causa</strong>: "user" es palabra reservada en PostgreSQL</p>
<p><strong>Soluci√≥n</strong>:
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;users&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Usar nombre diferente</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</code></pre></div></p>
<h3 id="error-stackoverflowerror-en-json">Error: "StackOverflowError" en JSON</h3>
<p><strong>Causa</strong>: Referencias circulares</p>
<p><strong>Soluci√≥n</strong>:
<div class="highlight"><pre><span></span><code><span class="nd">@JsonManagedReference</span><span class="w">  </span><span class="c1">// En el lado padre</span>
<span class="nd">@JsonBackReference</span><span class="w">     </span><span class="c1">// En el lado hijo</span>
</code></pre></div></p>
<h3 id="error-lazyinitializationexception">Error: "LazyInitializationException"</h3>
<p><strong>Causa</strong>: Acceso a relaciones lazy fuera de transacci√≥n</p>
<p><strong>Soluci√≥n</strong>:
<div class="highlight"><pre><span></span><code><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FetchType</span><span class="p">.</span><span class="na">EAGER</span><span class="p">)</span><span class="w">  </span><span class="c1">// Solo si es necesario</span>
<span class="c1">// O usar @Transactional en el servicio</span>
</code></pre></div></p>
<h3 id="error-detached-entity-passed-to-persist">Error: "Detached entity passed to persist"</h3>
<p><strong>Causa</strong>: Intentar guardar entidad con ID ya asignado</p>
<p><strong>Soluci√≥n</strong>:
<div class="highlight"><pre><span></span><code><span class="c1">// Usar merge() en lugar de save() para entidades existentes</span>
<span class="n">entityManager</span><span class="p">.</span><span class="na">merge</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
</code></pre></div></p>
<h2 id="configuraciones-adicionales">üîß Configuraciones Adicionales</h2>
<h3 id="auditoria-automatica">Auditor√≠a Autom√°tica</h3>
<p>Para agregar campos de auditor√≠a autom√°tica:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="nd">@EntityListeners</span><span class="p">(</span><span class="n">AuditingEntityListener</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// campos existentes...</span>

<span class="w">    </span><span class="nd">@CreatedDate</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@LastModifiedDate</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@CreatedBy</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@LastModifiedBy</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastModifiedBy</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Y en la clase principal:
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableJpaAuditing</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Pib2Application</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="validaciones">Validaciones</h3>
<p>Agregar validaciones a los campos:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Entity</span>
<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@NotBlank</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Username is required&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Username must be between 3 and 50 characters&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Email</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Email should be valid&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@NotBlank</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Email is required&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@NotBlank</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Password is required&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Password must be at least 6 characters&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@NotBlank</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Role is required&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">role</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="conceptos-clave-aprendidos">üìö Conceptos Clave Aprendidos</h2>
<ul>
<li><strong>Entidades JPA</strong>: Clases que representan tablas de base de datos</li>
<li><strong>Anotaciones de mapeo</strong>: @Entity, @Table, @Id, @GeneratedValue</li>
<li><strong>Relaciones</strong>: @OneToMany, @ManyToOne, @JoinColumn</li>
<li><strong>Lombok</strong>: Reducci√≥n de c√≥digo boilerplate</li>
<li><strong>Jackson</strong>: Manejo de referencias circulares en JSON</li>
<li><strong>Cascade</strong>: Propagaci√≥n de operaciones a entidades relacionadas</li>
<li><strong>Orphan removal</strong>: Eliminaci√≥n autom√°tica de entidades hu√©rfanas</li>
</ul>
<h2 id="proximos-pasos">üéØ Pr√≥ximos Pasos</h2>
<p>En la siguiente secci√≥n aprender√°s a:
- Crear DTOs (Data Transfer Objects)
- Implementar mapeo entre entidades y DTOs
- Separar la capa de presentaci√≥n de la capa de datos
- Validar datos de entrada</p>
<hr />
<p><a href="../02-configuracion-database/"><strong>‚Üê Anterior: Configuraci√≥n de Base de Datos</strong></a> | <a href="../"><strong>Volver al √çndice</strong></a> | <a href="../04-dtos-mapeo/"><strong>Siguiente: DTOs y Mapeo ‚Üí</strong></a></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 &copy; by JFVG
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs.sticky", "navigation.tabs", "navigation.top", "content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>