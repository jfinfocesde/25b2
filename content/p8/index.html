
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="jhonfvg">
      
      
        <link rel="canonical" href="https://jfinfocesde.github.io/25b2/content/p8/">
      
      
        <link rel="prev" href="../p7/">
      
      
        <link rel="next" href="../p9/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>Semana 8 - Repositorios en Spring Boot (Spring Data JPA) - Backend 2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#semana-8-repositorios-en-spring-boot-spring-data-jpa" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Backend 2" class="md-header__button md-logo" aria-label="Backend 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215m-6.56 0a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Backend 2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Semana 8 - Repositorios en Spring Boot (Spring Data JPA)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Inicio

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../p1/" class="md-tabs__link">
          
  
    
  
  Contenido

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../activities/p1/" class="md-tabs__link">
          
  
    
  
  Actividades

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/p1/" class="md-tabs__link">
          
  
    
  
  Tutoriales

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../pi/p1/" class="md-tabs__link">
          
  
    
  
  Proyecto Integrador

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Backend 2" class="md-nav__button md-logo" aria-label="Backend 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215m-6.56 0a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/></svg>

    </a>
    Backend 2
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Contenido
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Contenido
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 1 - Pacto pedagógico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 2 - Guía sobre API REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 3 - Patrones de Diseño: MVC y su aplicación en una API REST con Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 4 - Spring Boot Generalidades
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 5: Entidades en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 6 - Evaluación Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Relaciones en Spring Boot con JPA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Semana 8 - Repositorios en Spring Boot (Spring Data JPA)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Semana 8 - Repositorios en Spring Boot (Spring Data JPA)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-que-es-un-repositorio-en-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es un repositorio en Spring Boot?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. ¿Qué es un repositorio en Spring Boot?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-ventajas-de-usar-repositorios" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Ventajas de usar repositorios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-jerarquia-de-interfaces-de-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      2. Jerarquía de interfaces de repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Jerarquía de interfaces de repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-descripcion-de-cada-interfaz" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Descripción de cada interfaz
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Descripción de cada interfaz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      Repository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crudrepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      CrudRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagingandsortingrepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      PagingAndSortingRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jparepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      JpaRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-creando-tu-primer-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Creando tu primer repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Creando tu primer repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ejemplo-practico-entidad-producto" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Ejemplo práctico: Entidad Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-repositorio-basico" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Repositorio básico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-usando-el-repositorio-en-un-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Usando el repositorio en un servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-metodos-de-consulta-derivados-query-methods" class="md-nav__link">
    <span class="md-ellipsis">
      4. Métodos de consulta derivados (Query Methods)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Métodos de consulta derivados (Query Methods)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-palabras-clave-para-nombres-de-metodos" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Palabras clave para nombres de métodos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-operadores-de-comparacion" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Operadores de comparación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-ejemplo-de-uso-en-el-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Ejemplo de uso en el servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-consultas-personalizadas-con-query" class="md-nav__link">
    <span class="md-ellipsis">
      5. Consultas personalizadas con @Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Consultas personalizadas con @Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-consultas-jpql" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Consultas JPQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-consultas-sql-nativas" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Consultas SQL nativas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-paginacion-y-ordenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      6. Paginación y ordenamiento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Paginación y ordenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-implementacion-basica" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Implementación básica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-repositorio-con-paginacion-personalizada" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Repositorio con paginación personalizada
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-ejemplo-completo-controlador-rest" class="md-nav__link">
    <span class="md-ellipsis">
      7. Ejemplo completo: Controlador REST
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-mejores-practicas" class="md-nav__link">
    <span class="md-ellipsis">
      8. Mejores prácticas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Mejores prácticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-convenciones-de-nomenclatura" class="md-nav__link">
    <span class="md-ellipsis">
      8.1 Convenciones de nomenclatura
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-optimizacion-de-rendimiento" class="md-nav__link">
    <span class="md-ellipsis">
      8.2 Optimización de rendimiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-manejo-de-transacciones" class="md-nav__link">
    <span class="md-ellipsis">
      8.3 Manejo de transacciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 9 - Servicios en Spring Boot (Conceptos Básicos)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 10 - Servicios Avanzados en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 11 - Controladores Spring Boot API REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 12 - Evaluación Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentación de API con Spring Boot y OpenAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 14 - Conceptos y términos técnicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 16 - Evaluación Primer Momento
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Actividades
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Actividades
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 3 - Actividad colaborativa: Diseñando una API REST con MVC sin escribir código
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semana 4 - Guía Completa para Crear un Proyecto Spring Boot con H2, PostgreSQL y MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutoriales
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutoriales
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estructuración de un Proyecto API REST en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring Boot Actuator: Monitoreo y Gestión de Aplicaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/p3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial Completo de Lombok en Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ejemplo Api Rest
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Ejemplo Api Rest
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/00-estructura-proyecto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estructura del Proyecto Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/01-configuracion-inicial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Configuración Inicial del Proyecto Spring Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/02-configuracion-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Configuración de Base de Datos y JPA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/03-entidades-modelos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entidades y Modelos de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/04-dtos-mapeo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. DTOs y Mapeo de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/05-repositorios-acceso-datos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Repositorios y Acceso a Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/06-servicios-logica-negocio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Servicios y Lógica de Negocio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/07-controladores-rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Controladores REST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/08-actuator-monitoreo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Spring Boot Actuator y Monitoreo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/09-validacion-manejo-errores/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Validación y Manejo de Errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/10-Repositorio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Repositorio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proyecto Integrador
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Proyecto Integrador
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/p1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fork del Repositorio para el Proyecto Integrador - Básico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/p2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repositorio para el Proyecto Integrador - Seguridad y Documentación API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-que-es-un-repositorio-en-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es un repositorio en Spring Boot?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. ¿Qué es un repositorio en Spring Boot?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-ventajas-de-usar-repositorios" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Ventajas de usar repositorios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-jerarquia-de-interfaces-de-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      2. Jerarquía de interfaces de repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Jerarquía de interfaces de repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-descripcion-de-cada-interfaz" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Descripción de cada interfaz
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Descripción de cada interfaz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      Repository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crudrepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      CrudRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagingandsortingrepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      PagingAndSortingRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jparepositoryt-id" class="md-nav__link">
    <span class="md-ellipsis">
      JpaRepository&lt;T, ID&gt;
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-creando-tu-primer-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Creando tu primer repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Creando tu primer repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ejemplo-practico-entidad-producto" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Ejemplo práctico: Entidad Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-repositorio-basico" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Repositorio básico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-usando-el-repositorio-en-un-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Usando el repositorio en un servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-metodos-de-consulta-derivados-query-methods" class="md-nav__link">
    <span class="md-ellipsis">
      4. Métodos de consulta derivados (Query Methods)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Métodos de consulta derivados (Query Methods)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-palabras-clave-para-nombres-de-metodos" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Palabras clave para nombres de métodos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-operadores-de-comparacion" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Operadores de comparación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-ejemplo-de-uso-en-el-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Ejemplo de uso en el servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-consultas-personalizadas-con-query" class="md-nav__link">
    <span class="md-ellipsis">
      5. Consultas personalizadas con @Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Consultas personalizadas con @Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-consultas-jpql" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Consultas JPQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-consultas-sql-nativas" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Consultas SQL nativas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-paginacion-y-ordenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      6. Paginación y ordenamiento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Paginación y ordenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-implementacion-basica" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Implementación básica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-repositorio-con-paginacion-personalizada" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Repositorio con paginación personalizada
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-ejemplo-completo-controlador-rest" class="md-nav__link">
    <span class="md-ellipsis">
      7. Ejemplo completo: Controlador REST
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-mejores-practicas" class="md-nav__link">
    <span class="md-ellipsis">
      8. Mejores prácticas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Mejores prácticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-convenciones-de-nomenclatura" class="md-nav__link">
    <span class="md-ellipsis">
      8.1 Convenciones de nomenclatura
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-optimizacion-de-rendimiento" class="md-nav__link">
    <span class="md-ellipsis">
      8.2 Optimización de rendimiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-manejo-de-transacciones" class="md-nav__link">
    <span class="md-ellipsis">
      8.3 Manejo de transacciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="semana-8-repositorios-en-spring-boot-spring-data-jpa">Semana 8 - Repositorios en Spring Boot (Spring Data JPA)</h1>
<div class="admonition abstract">
<p class="admonition-title">Resumen ejecutivo</p>
<p>Los <strong>repositorios</strong> en Spring Boot son interfaces que proporcionan métodos para realizar operaciones CRUD (Create, Read, Update, Delete) sobre las entidades sin necesidad de escribir código SQL. Spring Data JPA genera automáticamente la implementación basándose en convenciones de nombres y anotaciones.</p>
</div>
<hr />
<h2 id="1-que-es-un-repositorio-en-spring-boot">1. ¿Qué es un repositorio en Spring Boot?</h2>
<div class="admonition info">
<p class="admonition-title">Definición</p>
<p>Un <strong>repositorio</strong> es una interfaz que actúa como una capa de abstracción entre la lógica de negocio y la base de datos. Proporciona métodos para acceder y manipular datos de las entidades de forma sencilla y eficiente.</p>
</div>
<h3 id="11-ventajas-de-usar-repositorios">1.1 Ventajas de usar repositorios</h3>
<table>
<thead>
<tr>
<th>Ventaja</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Abstracción</strong></td>
<td>Oculta la complejidad de las consultas SQL</td>
</tr>
<tr>
<td><strong>Productividad</strong></td>
<td>Reduce significativamente el código boilerplate</td>
</tr>
<tr>
<td><strong>Mantenibilidad</strong></td>
<td>Centraliza las operaciones de datos</td>
</tr>
<tr>
<td><strong>Testabilidad</strong></td>
<td>Facilita las pruebas unitarias con mocks</td>
</tr>
<tr>
<td><strong>Consistencia</strong></td>
<td>Estandariza el acceso a datos en toda la aplicación</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-jerarquia-de-interfaces-de-repositorio">2. Jerarquía de interfaces de repositorio</h2>
<p>Spring Data JPA proporciona una jerarquía de interfaces con diferentes niveles de funcionalidad:</p>
<pre class="mermaid"><code>graph TD
    A[Repository&lt;T, ID&gt;] --&gt; B[CrudRepository&lt;T, ID&gt;]
    B --&gt; C[PagingAndSortingRepository&lt;T, ID&gt;]
    C --&gt; D[JpaRepository&lt;T, ID&gt;]

    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#e8f5e8</code></pre>
<h3 id="21-descripcion-de-cada-interfaz">2.1 Descripción de cada interfaz</h3>
<h4 id="repositoryt-id"><code>Repository&lt;T, ID&gt;</code></h4>
<ul>
<li><strong>Propósito</strong>: Interfaz marcadora base</li>
<li><strong>Métodos</strong>: Ninguno (solo marcador)</li>
<li><strong>Uso</strong>: Cuando quieres crear métodos completamente personalizados</li>
</ul>
<h4 id="crudrepositoryt-id"><code>CrudRepository&lt;T, ID&gt;</code></h4>
<ul>
<li><strong>Propósito</strong>: Operaciones CRUD básicas</li>
<li><strong>Métodos principales</strong>:
  <div class="highlight"><pre><span></span><code><span class="n">save</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span><span class="w">           </span><span class="c1">// Guardar entidad</span>
<span class="n">findById</span><span class="p">(</span><span class="n">ID</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">          </span><span class="c1">// Buscar por ID</span>
<span class="n">findAll</span><span class="p">()</span><span class="w">                </span><span class="c1">// Obtener todas las entidades</span>
<span class="n">deleteById</span><span class="p">(</span><span class="n">ID</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">        </span><span class="c1">// Eliminar por ID</span>
<span class="n">count</span><span class="p">()</span><span class="w">                  </span><span class="c1">// Contar registros</span>
<span class="n">existsById</span><span class="p">(</span><span class="n">ID</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">        </span><span class="c1">// Verificar existencia</span>
</code></pre></div></li>
</ul>
<h4 id="pagingandsortingrepositoryt-id"><code>PagingAndSortingRepository&lt;T, ID&gt;</code></h4>
<ul>
<li><strong>Propósito</strong>: Añade paginación y ordenamiento</li>
<li><strong>Métodos adicionales</strong>:
  <div class="highlight"><pre><span></span><code><span class="n">findAll</span><span class="p">(</span><span class="n">Sort</span><span class="w"> </span><span class="n">sort</span><span class="p">)</span><span class="w">           </span><span class="c1">// Buscar con ordenamiento</span>
<span class="n">findAll</span><span class="p">(</span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">)</span><span class="w">   </span><span class="c1">// Buscar con paginación</span>
</code></pre></div></li>
</ul>
<h4 id="jparepositoryt-id"><code>JpaRepository&lt;T, ID&gt;</code></h4>
<ul>
<li><strong>Propósito</strong>: Funcionalidad completa de JPA</li>
<li><strong>Métodos adicionales</strong>:
  <div class="highlight"><pre><span></span><code><span class="n">flush</span><span class="p">()</span><span class="w">                      </span><span class="c1">// Sincronizar con BD</span>
<span class="n">saveAndFlush</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span><span class="w">       </span><span class="c1">// Guardar y sincronizar</span>
<span class="n">deleteInBatch</span><span class="p">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w">   </span><span class="c1">// Eliminación en lote</span>
<span class="n">getOne</span><span class="p">(</span><span class="n">ID</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">                </span><span class="c1">// Referencia lazy</span>
</code></pre></div></li>
</ul>
<hr />
<h2 id="3-creando-tu-primer-repositorio">3. Creando tu primer repositorio</h2>
<h3 id="31-ejemplo-practico-entidad-producto">3.1 Ejemplo práctico: Entidad Producto</h3>
<p>Primero, definamos una entidad simple:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.ejemplo.demo.entity</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;productos&quot;</span><span class="p">)</span>
<span class="nd">@Data</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Producto</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Id</span>
<span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">columnDefinition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TEXT&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">descripcion</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">precision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">precio</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">stock</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fecha_creacion&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">fechaCreacion</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@PrePersist</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">fechaCreacion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="32-repositorio-basico">3.2 Repositorio básico</h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.ejemplo.demo.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.ejemplo.demo.entity.Producto</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Spring Data JPA genera automáticamente la implementación</span>
<span class="w">    </span><span class="c1">// Ya tienes disponibles todos los métodos CRUD</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="33-usando-el-repositorio-en-un-servicio">3.3 Usando el repositorio en un servicio</h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.ejemplo.demo.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.ejemplo.demo.entity.Producto</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.ejemplo.demo.repository.ProductoRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductoService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductoRepository</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Crear producto</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Producto</span><span class="w"> </span><span class="nf">crearProducto</span><span class="p">(</span><span class="n">Producto</span><span class="w"> </span><span class="n">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">producto</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Obtener todos los productos</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerTodos</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Buscar por ID</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarPorId</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Actualizar producto</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Producto</span><span class="w"> </span><span class="nf">actualizarProducto</span><span class="p">(</span><span class="n">Producto</span><span class="w"> </span><span class="n">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">producto</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Eliminar producto</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">eliminarProducto</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Contar productos</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">contarProductos</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">count</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="4-metodos-de-consulta-derivados-query-methods">4. Métodos de consulta derivados (Query Methods)</h2>
<div class="admonition tip">
<p class="admonition-title">Convención sobre configuración</p>
<p>Spring Data JPA puede generar consultas automáticamente basándose en el nombre del método. Esto elimina la necesidad de escribir SQL en muchos casos.</p>
</div>
<h3 id="41-palabras-clave-para-nombres-de-metodos">4.1 Palabras clave para nombres de métodos</h3>
<table>
<thead>
<tr>
<th>Palabra clave</th>
<th>Ejemplo</th>
<th>SQL equivalente</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>findBy</code></td>
<td><code>findByNombre(String nombre)</code></td>
<td><code>WHERE nombre = ?</code></td>
</tr>
<tr>
<td><code>findAllBy</code></td>
<td><code>findAllByActivo(Boolean activo)</code></td>
<td><code>WHERE activo = ?</code></td>
</tr>
<tr>
<td><code>countBy</code></td>
<td><code>countByActivo(Boolean activo)</code></td>
<td><code>SELECT COUNT(*) WHERE activo = ?</code></td>
</tr>
<tr>
<td><code>deleteBy</code></td>
<td><code>deleteByActivo(Boolean activo)</code></td>
<td><code>DELETE WHERE activo = ?</code></td>
</tr>
<tr>
<td><code>existsBy</code></td>
<td><code>existsByNombre(String nombre)</code></td>
<td><code>SELECT COUNT(*) &gt; 0 WHERE nombre = ?</code></td>
</tr>
</tbody>
</table>
<h3 id="42-operadores-de-comparacion">4.2 Operadores de comparación</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Igualdad</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombre</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Múltiples condiciones con AND</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreAndActivo</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Múltiples condiciones con OR</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreOrDescripcion</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">descripcion</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Mayor que</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByPrecioGreaterThan</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">precio</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Menor que</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByPrecioLessThan</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">precio</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Entre valores</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByPrecioBetween</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">max</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Contiene texto (LIKE %texto%)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreContaining</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">texto</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Empieza con texto (LIKE texto%)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreStartingWith</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">prefijo</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Termina con texto (LIKE %texto)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreEndingWith</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">sufijo</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Ignorar mayúsculas/minúsculas</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreIgnoreCase</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Valores nulos</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByDescripcionIsNull</span><span class="p">();</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByDescripcionIsNotNull</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// En una lista de valores</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByNombreIn</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nombres</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Ordenamiento</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByActivoOrderByNombreAsc</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByActivoOrderByPrecioDesc</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Limitar resultados</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findTop5ByActivoOrderByFechaCreacionDesc</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>
<span class="w">    </span><span class="n">Producto</span><span class="w"> </span><span class="nf">findFirstByActivoOrderByPrecioAsc</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="43-ejemplo-de-uso-en-el-servicio">4.3 Ejemplo de uso en el servicio</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductoService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductoRepository</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Buscar productos activos</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerProductosActivos</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findByActivo</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Buscar por rango de precios</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarPorRangoPrecios</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findByPrecioBetween</span><span class="p">(</span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Buscar productos por texto en nombre</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarPorTexto</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">texto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findByNombreContaining</span><span class="p">(</span><span class="n">texto</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Obtener productos más caros</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerMasCaros</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findTop5ByActivoOrderByPrecioDesc</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="5-consultas-personalizadas-con-query">5. Consultas personalizadas con @Query</h2>
<p>Cuando los métodos derivados no son suficientes, puedes escribir consultas personalizadas:</p>
<h3 id="51-consultas-jpql">5.1 Consultas JPQL</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// JPQL básico</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT p FROM Producto p WHERE p.precio &gt; :precio&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findProductosCaros</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;precio&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">precio</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// JPQL con múltiples parámetros</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT p FROM Producto p WHERE p.nombre LIKE %:nombre% AND p.activo = :activo&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarPorNombreYEstado</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                         </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;activo&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Consulta de agregación</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT AVG(p.precio) FROM Producto p WHERE p.activo = true&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">obtenerPrecioPromedio</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Consulta que retorna valores específicos</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT p.nombre, p.precio FROM Producto p WHERE p.stock &lt; :stockMinimo&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">[]&gt;</span><span class="w"> </span><span class="nf">obtenerProductosBajoStock</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;stockMinimo&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">stockMinimo</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="52-consultas-sql-nativas">5.2 Consultas SQL nativas</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// SQL nativo básico</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT * FROM productos WHERE precio &gt; ?1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nativeQuery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findProductosCarosNativo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">precio</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// SQL nativo con parámetros nombrados</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT * FROM productos WHERE nombre ILIKE %:nombre%&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">           </span><span class="n">nativeQuery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarPorNombreIgnorandoMayusculas</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Consulta de actualización</span>
<span class="w">    </span><span class="nd">@Modifying</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;UPDATE Producto p SET p.activo = false WHERE p.stock = 0&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">desactivarProductosSinStock</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Consulta de eliminación</span>
<span class="w">    </span><span class="nd">@Modifying</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;DELETE FROM Producto p WHERE p.activo = false&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">eliminarProductosInactivos</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="6-paginacion-y-ordenamiento">6. Paginación y ordenamiento</h2>
<h3 id="61-implementacion-basica">6.1 Implementación básica</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductoService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductoRepository</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Paginación simple</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerProductosPaginados</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tamaño</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="n">tamaño</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">pageable</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Paginación con ordenamiento</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerProductosOrdenados</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tamaño</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">campo</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">direccion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Sort</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direccion</span><span class="p">.</span><span class="na">equalsIgnoreCase</span><span class="p">(</span><span class="s">&quot;desc&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span>
<span class="w">                   </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="n">campo</span><span class="p">).</span><span class="na">descending</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">                   </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="n">campo</span><span class="p">).</span><span class="na">ascending</span><span class="p">();</span>

<span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="n">tamaño</span><span class="p">,</span><span class="w"> </span><span class="n">sort</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">pageable</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Paginación con filtros</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">buscarProductosActivos</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tamaño</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="n">tamaño</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                          </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="s">&quot;fechaCreacion&quot;</span><span class="p">).</span><span class="na">descending</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findByActivo</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">pageable</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="62-repositorio-con-paginacion-personalizada">6.2 Repositorio con paginación personalizada</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Método que acepta Pageable</span>
<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByActivo</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">,</span><span class="w"> </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Consulta personalizada con paginación</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT p FROM Producto p WHERE p.precio BETWEEN :min AND :max&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByRangoPrecios</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;min&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                     </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">max</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                     </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="7-ejemplo-completo-controlador-rest">7. Ejemplo completo: Controlador REST</h2>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.ejemplo.demo.controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.ejemplo.demo.entity.Producto</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.ejemplo.demo.service.ProductoService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/productos&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductoController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductoService</span><span class="w"> </span><span class="n">productoService</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Obtener todos los productos con paginación</span>
<span class="w">    </span><span class="nd">@GetMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">obtenerProductos</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pagina</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;10&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tamaño</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ordenarPor</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;asc&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">direccion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">productos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productoService</span><span class="p">.</span><span class="na">obtenerProductosOrdenados</span><span class="p">(</span>
<span class="w">                </span><span class="n">pagina</span><span class="p">,</span><span class="w"> </span><span class="n">tamaño</span><span class="p">,</span><span class="w"> </span><span class="n">ordenarPor</span><span class="p">,</span><span class="w"> </span><span class="n">direccion</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">productos</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Obtener producto por ID</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerProducto</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">producto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productoService</span><span class="p">.</span><span class="na">buscarPorId</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">producto</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">ResponseEntity</span><span class="p">::</span><span class="n">ok</span><span class="p">)</span>
<span class="w">                      </span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">notFound</span><span class="p">().</span><span class="na">build</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Crear nuevo producto</span>
<span class="w">    </span><span class="nd">@PostMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">crearProducto</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">Producto</span><span class="w"> </span><span class="n">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Producto</span><span class="w"> </span><span class="n">nuevoProducto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productoService</span><span class="p">.</span><span class="na">crearProducto</span><span class="p">(</span><span class="n">producto</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">nuevoProducto</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Buscar productos por texto</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/buscar&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">buscarProductos</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">texto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">productos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productoService</span><span class="p">.</span><span class="na">buscarPorTexto</span><span class="p">(</span><span class="n">texto</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">productos</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Buscar por rango de precios</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/precio&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">buscarPorPrecio</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">min</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">productos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productoService</span><span class="p">.</span><span class="na">buscarPorRangoPrecios</span><span class="p">(</span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">productos</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="8-mejores-practicas">8. Mejores prácticas</h2>
<h3 id="81-convenciones-de-nomenclatura">8.1 Convenciones de nomenclatura</h3>
<div class="admonition tip">
<p class="admonition-title">Recomendaciones</p>
<ul>
<li>Usa nombres descriptivos: <code>findByNombreContaining</code> en lugar de <code>findByNombreLike</code></li>
<li>Mantén consistencia en los nombres de métodos</li>
<li>Prefiere métodos derivados sobre consultas personalizadas cuando sea posible</li>
<li>Usa <code>@Param</code> para mayor claridad en consultas JPQL</li>
</ul>
</div>
<h3 id="82-optimizacion-de-rendimiento">8.2 Optimización de rendimiento</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ProductoRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Producto</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Usar proyecciones para obtener solo campos necesarios</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT p.id, p.nombre, p.precio FROM Producto p WHERE p.activo = true&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">[]&gt;</span><span class="w"> </span><span class="nf">obtenerResumenProductos</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Usar EXISTS para verificaciones de existencia</span>
<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT CASE WHEN COUNT(p) &gt; 0 THEN true ELSE false END FROM Producto p WHERE p.nombre = :nombre&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">existeProductoConNombre</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Limitar resultados cuando sea apropiado</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findTop10ByActivoOrderByFechaCreacionDesc</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">activo</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="83-manejo-de-transacciones">8.3 Manejo de transacciones</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductoService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductoRepository</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Método que requiere transacción</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualizarStockMasivo</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">productos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Producto</span><span class="w"> </span><span class="n">producto</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">productos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">producto</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Si hay error, toda la operación se revierte</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Método de solo lectura (optimización)</span>
<span class="w">    </span><span class="nd">@Transactional</span><span class="p">(</span><span class="n">readOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Producto</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">obtenerProductosActivos</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">productoRepository</span><span class="p">.</span><span class="na">findByActivo</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 &copy; by JFVG
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs.sticky", "navigation.tabs", "navigation.top", "content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>